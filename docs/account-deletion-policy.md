# ê³„ì • ì‚­ì œ ì •ì±… (Account Deletion Policy)

> ìµœì¢… ìˆ˜ì •ì¼: 2025-01-22

## 1. ê°œìš”

Park Golf Platformì˜ ì‚¬ìš©ì ê³„ì • ì‚­ì œ ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ ì •ì±…ì€ ê°œì¸ì •ë³´ë³´í˜¸ë²• ë° ì„¸ë²•ìƒ ìš”ê±´ì„ ì¤€ìˆ˜í•˜ë©´ì„œ ì‚¬ìš©ìì˜ íƒˆí‡´ ê¶Œë¦¬ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

---

## 2. ë°ì´í„° ë¶„í¬ í˜„í™©

### 2.1 ì„œë¹„ìŠ¤ë³„ ì‚¬ìš©ì ë°ì´í„°

| ì„œë¹„ìŠ¤ | í…Œì´ë¸” | ì‚¬ìš©ì ì°¸ì¡° ë°©ì‹ | ì²˜ë¦¬ ë°©ë²• |
|--------|--------|-----------------|----------|
| **iam-service** | User | ì›ë³¸ ë°ì´í„° | ì‚­ì œ (ì´ë ¥ ë³´ê´€) |
| **iam-service** | RefreshToken | user_id (CASCADE) | ìë™ ì‚­ì œ |
| **iam-service** | FriendRequest | from_user_id, to_user_id (CASCADE) | ìë™ ì‚­ì œ |
| **iam-service** | Friendship | user_id, friend_id (CASCADE) | ìë™ ì‚­ì œ |
| **iam-service** | UserHistory | ì‹ ê·œ í…Œì´ë¸” | ì˜êµ¬ ë³´ê´€ |
| **booking-service** | Booking | user_id (nullable) | ìµëª…í™” |
| **booking-service** | Payment | booking ì°¸ì¡° | ìœ ì§€ (ì„¸ë¬´) |
| **booking-service** | BookingHistory | user_id | ìœ ì§€ (ê°ì‚¬) |
| **chat-service** | ChatRoomMember | user_id, user_name | ìµëª…í™” |
| **chat-service** | ChatMessage | sender_id, sender_name | ìµëª…í™” |
| **notify-service** | Notification | user_id | ì™„ì „ ì‚­ì œ |
| **notify-service** | NotificationSettings | user_id | ì™„ì „ ì‚­ì œ |
| **course-service** | - | ì‚¬ìš©ì ë°ì´í„° ì—†ìŒ | ì²˜ë¦¬ ë¶ˆí•„ìš” |

### 2.2 ì¹œêµ¬ ê´€ê³„ ì²˜ë¦¬

ì‚¬ìš©ì ì‚­ì œ ì‹œ `Friendship` í…Œì´ë¸”ì˜ Cascade ì„¤ì •ì— ì˜í•´:

```
ì‚¬ìš©ì A ì‚­ì œ ì‹œ:
â”œâ”€ Friendship (user_id = A) â†’ ìë™ ì‚­ì œ
â””â”€ Friendship (friend_id = A) â†’ ìë™ ì‚­ì œ

ê²°ê³¼: Aì˜ ì¹œêµ¬ë“¤ ì…ì¥ì—ì„œë„ ì¹œêµ¬ ëª©ë¡ì—ì„œ Aê°€ ìë™ìœ¼ë¡œ ì œê±°ë¨
```

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 3.1 UserHistory í…Œì´ë¸” (ì‹ ê·œ)

ì‚­ì œëœ ì‚¬ìš©ìì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ë³´ê´€í•˜ì—¬ ê²°ì œ/ì˜ˆì•½ ì´ë ¥ í™•ì¸ ì‹œ ì°¸ì¡°í•©ë‹ˆë‹¤.

```prisma
// iam-service/prisma/schema.prisma

model UserHistory {
  id              Int       @id @default(autoincrement())
  originalUserId  Int       @unique @map("original_user_id")  // ì›ë˜ User.id
  email           String                                       // ì‚­ì œ ì‹œì  ì´ë©”ì¼
  name            String?                                      // ì‚­ì œ ì‹œì  ì´ë¦„
  phone           String?                                      // ì‚­ì œ ì‹œì  ì „í™”ë²ˆí˜¸

  deletionReason  String?   @map("deletion_reason")            // íƒˆí‡´ ì‚¬ìœ 
  deletedAt       DateTime  @default(now()) @map("deleted_at") // ì‚­ì œ ì‹œì 

  createdAt       DateTime  @default(now()) @map("created_at")

  @@index([originalUserId])
  @@index([email])
  @@map("user_histories")
}
```

### 3.2 User ëª¨ë¸ í™•ì¥

```prisma
model User {
  // ê¸°ì¡´ í•„ë“œ...

  // ì‚­ì œ ê´€ë ¨ í•„ë“œ ì¶”ê°€
  deletionRequestedAt  DateTime?  @map("deletion_requested_at")
  deletionScheduledAt  DateTime?  @map("deletion_scheduled_at")

  @@map("users")
}
```

---

## 4. ì‚­ì œ í”„ë¡œì„¸ìŠ¤

### 4.1 ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ê³„ì • ì‚­ì œ í”„ë¡œì„¸ìŠ¤                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  [STEP 1]              [STEP 2]              [STEP 3]                  â”‚
â”‚  ì‚­ì œ ìš”ì²­              ìœ ì˜ˆ ê¸°ê°„              ìµœì¢… ì‚­ì œ                  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ë¹„ë°€ë²ˆí˜¸    â”‚      â”‚   7ì¼ê°„     â”‚      â”‚  ë°ì´í„°     â”‚            â”‚
â”‚  â”‚ í™•ì¸       â”‚ â”€â”€â”€â–º â”‚   ëŒ€ê¸°      â”‚ â”€â”€â”€â–º â”‚  ì²˜ë¦¬       â”‚            â”‚
â”‚  â”‚ + ì œí•œì¡°ê±´  â”‚      â”‚ (ì·¨ì†Œ ê°€ëŠ¥) â”‚      â”‚             â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚        â”‚                    â”‚                    â”‚                     â”‚
â”‚        â–¼                    â–¼                    â–¼                     â”‚
â”‚  â€¢ ì§„í–‰ì¤‘ ì˜ˆì•½ ì²´í¬    â€¢ ë¡œê·¸ì¸ ì‹œ ì·¨ì†Œ       â€¢ UserHistory ìƒì„±        â”‚
â”‚  â€¢ ë¯¸ê²°ì œ ì²´í¬         â€¢ ì•Œë¦¼ ë°œì†¡            â€¢ ê° ì„œë¹„ìŠ¤ ì²˜ë¦¬ ì‹¤í–‰     â”‚
â”‚  â€¢ í™˜ë¶ˆ ì§„í–‰ì¤‘ ì²´í¬    â€¢ ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œ      â€¢ User ë ˆì½”ë“œ ì‚­ì œ        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ì‚­ì œ ì œí•œ ì¡°ê±´

ë‹¤ìŒ ì¡°ê±´ì— í•´ë‹¹í•˜ë©´ ê³„ì • ì‚­ì œë¥¼ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:

| ì¡°ê±´ | ìƒíƒœ | í•´ê²° ë°©ë²• |
|------|------|----------|
| ì§„í–‰ ì¤‘ì¸ ì˜ˆì•½ | PENDING, SLOT_RESERVED, CONFIRMED | ì˜ˆì•½ ì·¨ì†Œ í›„ ì§„í–‰ |
| ë¯¸ê²°ì œ ê±´ | Payment.status != COMPLETED | ê²°ì œ ì™„ë£Œ í›„ ì§„í–‰ |
| í™˜ë¶ˆ ì§„í–‰ ì¤‘ | Refund.status = PENDING | í™˜ë¶ˆ ì™„ë£Œ í›„ ì§„í–‰ |

### 4.3 ìœ ì˜ˆ ê¸°ê°„

- **ê¸°ê°„**: 7ì¼
- **ì·¨ì†Œ ë°©ë²•**: ìœ ì˜ˆ ê¸°ê°„ ë‚´ ë¡œê·¸ì¸ ì‹œ ìë™ ì·¨ì†Œ ë˜ëŠ” ëª…ì‹œì  ì·¨ì†Œ ìš”ì²­
- **ì•Œë¦¼**: ì‚­ì œ ìš”ì²­ ì‹œ, ì‚­ì œ 3ì¼ ì „, ì‚­ì œ 1ì¼ ì „ ì•Œë¦¼ ë°œì†¡

---

## 5. ì„œë¹„ìŠ¤ë³„ ì²˜ë¦¬ ìƒì„¸

### 5.1 iam-service (Identity & Access Management)

```sql
-- 1. UserHistoryì— ê¸°ë³¸ ì •ë³´ ë³´ê´€
INSERT INTO user_histories (original_user_id, email, name, phone, deletion_reason, deleted_at)
SELECT id, email, name, phone, ?, NOW()
FROM users WHERE id = ?;

-- 2. Cascadeë¡œ ìë™ ì‚­ì œë˜ëŠ” í…Œì´ë¸”
-- - refresh_tokens (user_id CASCADE)
-- - friend_requests (from_user_id, to_user_id CASCADE)
-- - friendships (user_id, friend_id CASCADE)

-- 3. User ë ˆì½”ë“œ ì‚­ì œ
DELETE FROM users WHERE id = ?;
```

### 5.2 booking-service (ì˜ˆì•½/ê²°ì œ)

```sql
-- ì˜ˆì•½ ì •ë³´ ìµëª…í™” (user_idëŠ” ìœ ì§€í•˜ì—¬ UserHistory JOIN ê°€ëŠ¥)
UPDATE bookings SET
  user_name = '[ì‚­ì œëœ ì‚¬ìš©ì]'
WHERE user_id = ?;

-- user_id ìœ ì§€ ì´ìœ :
-- - UserHistory í…Œì´ë¸”ê³¼ JOINí•˜ì—¬ ì›ë˜ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ê°€ëŠ¥
-- - ê²°ì œ/ì„¸ë¬´ ê°ì‚¬ ì‹œ ì´ë ¥ ì¶”ì  í•„ìš”

-- ë‹¤ìŒ í…Œì´ë¸”ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ (ì„¸ë¬´/ê°ì‚¬ ëª©ì )
-- - payments (ê²°ì œ ê¸°ë¡)
-- - booking_history (ë³€ê²½ ì´ë ¥)
-- - refunds (í™˜ë¶ˆ ê¸°ë¡)
-- - user_noshow_records (user_id ìœ ì§€)
```

### 5.3 chat-service (ì±„íŒ…)

```sql
-- ì±„íŒ…ë°© ë©¤ë²„ ìµëª…í™” (user_idëŠ” ìœ ì§€)
UPDATE chat_room_members SET
  user_name = '[íƒˆí‡´í•œ íšŒì›]'
WHERE user_id = ?;

-- ë©”ì‹œì§€ ì‘ì„±ì ìµëª…í™” (sender_idëŠ” ìœ ì§€)
UPDATE chat_messages SET
  sender_name = '[íƒˆí‡´í•œ íšŒì›]'
WHERE sender_id = ?;

-- user_id, sender_id ìœ ì§€ ì´ìœ :
-- - ë©”ì‹œì§€ ê·¸ë£¹í•‘ ë° í‘œì‹œ ë¡œì§ì— í•„ìš”
-- - í•„ìš” ì‹œ UserHistory JOIN ê°€ëŠ¥
-- - ë©”ì‹œì§€ ë‚´ìš©ì€ ìœ ì§€ (ëŒ€í™” ë§¥ë½ ë³´ì¡´)
```

### 5.4 notify-service (ì•Œë¦¼)

```sql
-- ì•Œë¦¼ ì„¤ì • ì‚­ì œ
DELETE FROM notification_settings WHERE user_id = ?;

-- ì•Œë¦¼ ê¸°ë¡ ì‚­ì œ
DELETE FROM notifications WHERE user_id = ?;
```

---

## 6. NATS ì´ë²¤íŠ¸

### 6.1 ì´ë²¤íŠ¸ ì •ì˜

| ì´ë²¤íŠ¸ | ë°œí–‰ ì‹œì  | êµ¬ë… ì„œë¹„ìŠ¤ |
|--------|----------|------------|
| `user.deletion.requested` | ì‚­ì œ ìš”ì²­ ì‹œ | notify-service |
| `user.deletion.cancelled` | ì‚­ì œ ì·¨ì†Œ ì‹œ | notify-service |
| `user.deletion.reminder` | ì‚­ì œ 3ì¼/1ì¼ ì „ | notify-service |
| `user.deleted` | ìµœì¢… ì‚­ì œ ì‹œ | booking, chat, notify |

### 6.2 ì´ë²¤íŠ¸ í˜ì´ë¡œë“œ

```typescript
// user.deletion.requested
{
  userId: number;
  email: string;
  deletionScheduledAt: string; // ISO8601
}

// user.deleted
{
  userId: number;
  originalEmail: string;
  deletedAt: string; // ISO8601
}
```

### 6.3 ì²˜ë¦¬ ìˆœì„œ

```
[Scheduler: ì‚­ì œ ì˜ˆì •ì¼ ë„ë‹¬]
        â”‚
        â–¼
[iam-service: UserHistory ìƒì„±]
        â”‚
        â–¼
[iam-service: User ì‚­ì œ] â”€â”€â–º NATS: user.deleted
        â”‚
        â”œâ”€â”€â–º [notify-service] ì•Œë¦¼/ì„¤ì • ì‚­ì œ
        â”œâ”€â”€â–º [booking-service] ì˜ˆì•½ ì •ë³´ ìµëª…í™”
        â””â”€â”€â–º [chat-service] ì±„íŒ… ì •ë³´ ìµëª…í™”
```

---

## 7. API ëª…ì„¸

### 7.1 ì—”ë“œí¬ì¸íŠ¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/api/user/account/delete-request` | ê³„ì • ì‚­ì œ ìš”ì²­ |
| POST | `/api/user/account/delete-cancel` | ì‚­ì œ ìš”ì²­ ì·¨ì†Œ |
| GET | `/api/user/account/delete-status` | ì‚­ì œ ìƒíƒœ ì¡°íšŒ |

### 7.2 ì‚­ì œ ìš”ì²­ API

**Request:**
```json
POST /api/user/account/delete-request
{
  "password": "í˜„ì¬ë¹„ë°€ë²ˆí˜¸",
  "reason": "ì„œë¹„ìŠ¤ ë¶ˆë§Œì¡±",  // optional
  "confirmation": true
}
```

**Response (ì„±ê³µ):**
```json
{
  "success": true,
  "data": {
    "message": "ê³„ì • ì‚­ì œê°€ ìš”ì²­ë˜ì—ˆìŠµë‹ˆë‹¤.",
    "deletionScheduledAt": "2025-01-29T10:00:00Z",
    "canCancelUntil": "2025-01-29T09:59:59Z"
  }
}
```

**Response (ì‹¤íŒ¨ - ì§„í–‰ ì¤‘ ì˜ˆì•½ ì¡´ì¬):**
```json
{
  "success": false,
  "error": {
    "code": "ACTIVE_BOOKING_EXISTS",
    "message": "ì§„í–‰ ì¤‘ì¸ ì˜ˆì•½ì´ ìˆì–´ ê³„ì •ì„ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
    "details": {
      "activeBookings": 2
    }
  }
}
```

### 7.3 ì‚­ì œ ì·¨ì†Œ API

**Request:**
```json
POST /api/user/account/delete-cancel
```

**Response:**
```json
{
  "success": true,
  "data": {
    "message": "ê³„ì • ì‚­ì œ ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."
  }
}
```

### 7.4 ì‚­ì œ ìƒíƒœ ì¡°íšŒ API

**Request:**
```json
GET /api/user/account/delete-status
```

**Response (ì‚­ì œ ì˜ˆì •):**
```json
{
  "success": true,
  "data": {
    "status": "SCHEDULED",
    "deletionRequestedAt": "2025-01-22T10:00:00Z",
    "deletionScheduledAt": "2025-01-29T10:00:00Z",
    "daysRemaining": 5
  }
}
```

**Response (ì •ìƒ):**
```json
{
  "success": true,
  "data": {
    "status": "ACTIVE",
    "deletionRequestedAt": null,
    "deletionScheduledAt": null
  }
}
```

---

## 8. ë°ì´í„° ë³´ê´€ ì •ì±…

### 8.1 ë³´ê´€ ê¸°ê°„

| ë°ì´í„° ìœ í˜• | ë³´ê´€ ê¸°ê°„ | ê·¼ê±° |
|------------|----------|------|
| UserHistory (ê¸°ë³¸ ì •ë³´) | ì˜êµ¬ | ê²°ì œ/ì˜ˆì•½ ì´ë ¥ ì°¸ì¡°ìš© |
| ì˜ˆì•½/ê²°ì œ ê¸°ë¡ | 7ë…„ | ì„¸ë²• ì œ121ì¡° (ê±°ë˜ ì¦ë¹™ ë³´ê´€) |
| í™˜ë¶ˆ ê¸°ë¡ | 7ë…„ | ì„¸ë²• ì œ121ì¡° |
| ì±„íŒ… ê¸°ë¡ | 1ë…„ | ì„œë¹„ìŠ¤ ìš´ì˜ ëª©ì  |
| ì•Œë¦¼ ê¸°ë¡ | ì¦‰ì‹œ ì‚­ì œ | ë³´ê´€ í•„ìš” ì—†ìŒ |

### 8.2 UserHistory í™œìš©

```sql
-- ê²°ì œ ë‚´ì—­ ì¡°íšŒ ì‹œ ì‚­ì œëœ ì‚¬ìš©ì ì •ë³´ JOIN
SELECT
  b.booking_number,
  b.total_price,
  COALESCE(u.name, uh.name, '[ì•Œ ìˆ˜ ì—†ìŒ]') as user_name,
  COALESCE(u.email, uh.email, '[ì•Œ ìˆ˜ ì—†ìŒ]') as user_email
FROM bookings b
LEFT JOIN users u ON b.user_id = u.id
LEFT JOIN user_histories uh ON b.user_id = uh.original_user_id
WHERE b.id = ?;
```

---

## 9. iOS ì•± UI

### 9.1 ê³„ì • ì‚­ì œ í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ê³„ì • ì‚­ì œ                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  âš ï¸ ê³„ì • ì‚­ì œ ì•ˆë‚´                    â”‚
â”‚                                      â”‚
â”‚  ê³„ì •ì„ ì‚­ì œí•˜ë©´ ë‹¤ìŒ ì •ë³´ê°€          â”‚
â”‚  ì²˜ë¦¬ë©ë‹ˆë‹¤:                          â”‚
â”‚                                      â”‚
â”‚  ì‚­ì œë˜ëŠ” ì •ë³´:                       â”‚
â”‚  â€¢ í”„ë¡œí•„ ì •ë³´                        â”‚
â”‚  â€¢ ì¹œêµ¬ ëª©ë¡                          â”‚
â”‚  â€¢ ì•Œë¦¼ ì„¤ì • ë° ê¸°ë¡                  â”‚
â”‚                                      â”‚
â”‚  ìµëª…í™”ë˜ëŠ” ì •ë³´:                     â”‚
â”‚  â€¢ ì±„íŒ… ê¸°ë¡ (ì‘ì„±ìëª…ë§Œ ìµëª…í™”)       â”‚
â”‚  â€¢ ì˜ˆì•½/ê²°ì œ ê¸°ë¡ (ë²•ì  ë³´ê´€)         â”‚
â”‚                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                      â”‚
â”‚  íƒˆí‡´ ì‚¬ìœ  (ì„ íƒ)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â–¼ ì„ íƒí•´ ì£¼ì„¸ìš”                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â€¢ ì„œë¹„ìŠ¤ ì´ìš© ë¶ˆí¸                   â”‚
â”‚  â€¢ ê°œì¸ì •ë³´ ìš°ë ¤                      â”‚
â”‚  â€¢ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ì´ìš©                   â”‚
â”‚  â€¢ ê¸°íƒ€                              â”‚
â”‚                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                      â”‚
â”‚  ë¹„ë°€ë²ˆí˜¸ í™•ì¸                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                    ğŸ‘  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â˜‘ï¸ ìœ„ ë‚´ìš©ì„ í™•ì¸í–ˆìœ¼ë©°, ê³„ì •        â”‚
â”‚     ì‚­ì œì— ë™ì˜í•©ë‹ˆë‹¤.                â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     7ì¼ í›„ ê³„ì • ì‚­ì œ ìš”ì²­        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â„¹ï¸ 7ì¼ ì´ë‚´ ë¡œê·¸ì¸í•˜ë©´ ì‚­ì œê°€        â”‚
â”‚     ìë™ìœ¼ë¡œ ì·¨ì†Œë©ë‹ˆë‹¤.              â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 ì‚­ì œ ì˜ˆì • ìƒíƒœ í‘œì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ê³„ì • ì‚­ì œ ì˜ˆì •             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚           â° D-5                      â”‚
â”‚                                      â”‚
â”‚   2025ë…„ 1ì›” 29ì¼ì— ê³„ì •ì´           â”‚
â”‚   ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤.                  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         ì‚­ì œ ì·¨ì†Œí•˜ê¸°           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 10.1 Backend

- [ ] iam-service: UserHistory ëª¨ë¸ ì¶”ê°€
- [ ] iam-service: User ëª¨ë¸ì— ì‚­ì œ ê´€ë ¨ í•„ë“œ ì¶”ê°€
- [ ] iam-service: ì‚­ì œ ìš”ì²­/ì·¨ì†Œ/ìƒíƒœ API êµ¬í˜„
- [ ] iam-service: ì‚­ì œ ìŠ¤ì¼€ì¤„ëŸ¬ êµ¬í˜„
- [ ] iam-service: NATS user.deleted ì´ë²¤íŠ¸ ë°œí–‰
- [ ] user-api: ê³„ì • ì‚­ì œ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- [ ] booking-service: user.deleted êµ¬ë… ë° ìµëª…í™” ì²˜ë¦¬
- [ ] chat-service: user.deleted êµ¬ë… ë° ìµëª…í™” ì²˜ë¦¬
- [ ] notify-service: user.deleted êµ¬ë… ë° ì‚­ì œ ì²˜ë¦¬
- [ ] notify-service: ì‚­ì œ ì•Œë¦¼ í…œí”Œë¦¿ ì¶”ê°€

### 10.2 iOS

- [ ] DeleteAccountView êµ¬í˜„
- [ ] ì‚­ì œ ìš”ì²­ API ì—°ë™
- [ ] ì‚­ì œ ì˜ˆì • ìƒíƒœ í‘œì‹œ
- [ ] ì‚­ì œ ì·¨ì†Œ ê¸°ëŠ¥

### 10.3 í…ŒìŠ¤íŠ¸

- [ ] ì‚­ì œ ìš”ì²­/ì·¨ì†Œ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- [ ] 7ì¼ ìœ ì˜ˆ í›„ ì‚­ì œ í…ŒìŠ¤íŠ¸
- [ ] ê° ì„œë¹„ìŠ¤ ë°ì´í„° ì²˜ë¦¬ ê²€ì¦
- [ ] ì¹œêµ¬ ê´€ê³„ ìë™ í•´ì œ ê²€ì¦
- [ ] UserHistory ì°¸ì¡° í…ŒìŠ¤íŠ¸

---

## 11. ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì |
|------|------|----------|--------|
| 1.0 | 2025-01-22 | ìµœì´ˆ ì‘ì„± | - |
